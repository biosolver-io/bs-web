{
  "version": 3,
  "sources": ["empty-module:~/models/userRole.server", "../../../app/routes/register.tsx"],
  "sourcesContent": ["module.exports = {};", "import type { ActionArgs, LoaderArgs, V2_MetaFunction } from \"@remix-run/node\";\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, Link, useActionData, useSearchParams } from \"@remix-run/react\";\nimport { create } from \"domain\";\nimport { useEffect, useRef } from \"react\";\nimport { FaGoogle, FaLinkedin } from \"react-icons/fa\";\nimport logoPng from \"~/assets/images/logos/base.png\";\n\nimport { createUser, getUserByEmail } from \"~/models/user.server\";\nimport { createRoles } from \"~/models/userRole.server\";\nimport { createUserSession, getUserId } from \"~/session.server\";\nimport { safeRedirect, validateEmail } from \"~/utils\";\n\nexport const loader = async ({ request }: LoaderArgs) => {\n  const userId = await getUserId(request);\n  if (userId) return redirect(\"/\");\n  return json({});\n};\n\nexport const action = async ({ request }: ActionArgs) => {\n  const formData = await request.formData();\n  console.log(formData)\n  const email = formData.get(\"email\");\n  const password = formData.get(\"password\");\n  const roles = formData.getAll(\"roles\");\n  const redirectTo = safeRedirect(formData.get(\"redirectTo\"), \"/\");\n\n  console.log(email, password, roles)\n\n  if (!validateEmail(email)) {\n    return json(\n      { errors: { email: \"Email is invalid\", password: null } },\n      { status: 400 }\n    );\n  }\n\n  if (typeof password !== \"string\" || password.length === 0) {\n    return json(\n      { errors: { email: null, password: \"Password is required\" } },\n      { status: 400 }\n    );\n  }\n\n  if (password.length < 8) {\n    return json(\n      { errors: { email: null, password: \"Password is too short\" } },\n      { status: 400 }\n    );\n  }\n\n  const existingUser = await getUserByEmail(email);\n  if (existingUser) {\n    return json(\n      {\n        errors: {\n          email: \"A user already exists with this email\",\n          password: null,\n        },\n      },\n      { status: 400 }\n    );\n  }\n\n  const user = await createUser(email, password);\n  await createRoles(user.id, roles.map((role) => role.toString()));\n\n  return createUserSession({\n    redirectTo,\n    remember: false,\n    request,\n    userId: user.id,\n  });\n};\n\nexport const meta: V2_MetaFunction = () => [{ title: \"Sign Up\" }];\n\nexport default function Register() {\n  const [searchParams] = useSearchParams();\n  const redirectTo = searchParams.get(\"redirectTo\") ?? undefined;\n  const actionData = useActionData<typeof action>();\n  const emailRef = useRef<HTMLInputElement>(null);\n  const passwordRef = useRef<HTMLInputElement>(null);\n  const rolesRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (actionData?.errors?.email) {\n      emailRef.current?.focus();\n    } else if (actionData?.errors?.password) {\n      passwordRef.current?.focus();\n    }\n  }, [actionData]);\n\n  return (\n    <>\n      <div className=\"flex min-h-full flex-1 justify-center\">\n        <div className=\"flex flex-1 flex-col justify-center px-4 py-12 sm:px-6 lg:flex-none lg:px-20 xl:px-24\">\n          <div className=\"mx-auto w-full max-w-sm lg:w-96\">\n            <div className='w-full items-center text-center'>\n              <Link to=\"/\" className=\"items-center\" >\n                <img className=\"h-16 w-16 mx-auto\" src={logoPng} alt=\"BioSolver Logo\" />\n              </Link>\n              <h2 className=\"mt-8 text-2xl font-bold leading-9 tracking-tight text-gray-900\">\n                Create your account\n              </h2>\n              <p className=\"mt-2 text-sm leading-6 text-gray-500\">\n                Already a member?{' '}\n                <Link to=\"/login\" className=\"font-semibold text-purple-600 hover:text-purple-500\">\n                  Sign In\n                </Link>\n              </p>\n            </div>\n\n            <div className=\"mt-10\">\n              <div>\n                <Form method=\"post\" className=\"space-y-6\">\n                  <div>\n                    <label\n                      htmlFor=\"email\"\n                      className=\"block text-sm font-medium text-gray-700\"\n                    >\n                      Email address\n                    </label>\n                    <div className=\"mt-1\">\n                      <input\n                        ref={emailRef}\n                        id=\"email\"\n                        required\n                        autoFocus={true}\n                        name=\"email\"\n                        type=\"email\"\n                        autoComplete=\"email\"\n                        aria-invalid={actionData?.errors?.email ? true : undefined}\n                        aria-describedby=\"email-error\"\n                        className=\"w-full rounded border border-gray-500 px-2 py-1 text-lg\"\n                      />\n                      {actionData?.errors?.email ? (\n                        <div className=\"pt-1 text-red-700\" id=\"email-error\">\n                          {actionData.errors.email}\n                        </div>\n                      ) : null}\n                    </div>\n                  </div>\n\n                  <div>\n                    <label\n                      htmlFor=\"password\"\n                      className=\"block text-sm font-medium text-gray-700\"\n                    >\n                      Password\n                    </label>\n                    <div className=\"mt-1\">\n                      <input\n                        id=\"password\"\n                        ref={passwordRef}\n                        name=\"password\"\n                        type=\"password\"\n                        autoComplete=\"new-password\"\n                        aria-invalid={actionData?.errors?.password ? true : undefined}\n                        aria-describedby=\"password-error\"\n                        className=\"w-full rounded border border-gray-500 px-2 py-1 text-lg\"\n                      />\n                      {actionData?.errors?.password ? (\n                        <div className=\"pt-1 text-red-700\" id=\"password-error\">\n                          {actionData.errors.password}\n                        </div>\n                      ) : null}\n                    </div>\n                  </div>\n\n                  <fieldset>\n                    <legend>Roles</legend>\n                    <div className=\"space-y-5\">\n                      <div className=\"relative flex items-start\">\n                        <div className=\"flex h-6 items-center\">\n                          <input\n                            id=\"role-solver\"\n                            aria-describedby=\"role-solver-description\"\n                            name=\"roles\"\n                            value=\"solver\"\n                            type=\"checkbox\"\n                            className=\"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n                          />\n                        </div>\n                        <div className=\"ml-3 text-sm leading-6\">\n                          <label htmlFor=\"role-solver\" className=\"font-medium text-gray-900\">\n                            Solver\n                          </label>\n                          <p id=\"role-solver-description\" className=\"text-gray-500\">\n                            I am an expert/student looking for work.\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"relative flex items-start\">\n                        <div className=\"flex h-6 items-center\">\n                          <input\n                            id=\"role-seeker\"\n                            aria-describedby=\"role-seeker-description\"\n                            name=\"roles\"\n                            value=\"seeker\"\n                            type=\"checkbox\"\n                            className=\"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n                          />\n                        </div>\n                        <div className=\"ml-3 text-sm leading-6\">\n                          <label htmlFor=\"role-seeker\" className=\"font-medium text-gray-900\">\n                            Seeker\n                          </label>\n                          <p id=\"role-seeker-description\" className=\"text-gray-500\">\n                            I am looking to hire a Freelancer.\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"relative flex items-start\">\n                        <div className=\"flex h-6 items-center\">\n                          <input\n                            id=\"role-referrer\"\n                            aria-describedby=\"role-referrer-description\"\n                            name=\"roles\"\n                            value=\"referrer\"\n                            type=\"checkbox\"\n                            className=\"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n                          />\n                        </div>\n                        <div className=\"ml-3 text-sm leading-6\">\n                          <label htmlFor=\"role-referrer\" className=\"font-medium text-gray-900\">\n                            Referral Partner\n                          </label>\n                          <p id=\"role-referrer-description\" className=\"text-gray-500\">\n                            I can spread the word.\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  </fieldset>\n\n                  <input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\n                  <button\n                    type=\"submit\"\n                    className=\"w-full rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:bg-blue-400\"\n                  >\n                    Create Account\n                  </button>\n                  <div className=\"flex items-center justify-center\">\n                    <div className=\"text-center text-sm text-gray-500\">\n                      Already have an account?{\" \"}\n                      <Link\n                        className=\"text-blue-500 underline\"\n                        to={{\n                          pathname: \"/login\",\n                          search: searchParams.toString(),\n                        }}\n                      >\n                        Log in\n                      </Link>\n                    </div>\n                  </div>\n                </Form>\n              </div>\n\n              <div className=\"mt-10\">\n                <div className=\"relative\">\n                  <div className=\"absolute inset-0 flex items-center\" aria-hidden=\"true\">\n                    <div className=\"w-full border-t border-gray-200\" />\n                  </div>\n                  <div className=\"relative flex justify-center text-sm font-medium leading-6\">\n                    <span className=\"bg-white px-6 text-gray-900\">Or continue with</span>\n                  </div>\n                </div>\n\n                <div className=\"mt-6 grid grid-cols-2 gap-4\">\n                  <a\n                    href=\"#\"\n                    className=\"flex w-full items-center justify-center gap-3 rounded-md bg-white px-3 py-1.5 text-black bordered border-2 border-black\"\n                  >\n                    <FaGoogle className=\"h-5 w-5\" />\n                    <span className=\"text-sm font-semibold leading-6\">Google</span>\n                  </a>\n\n                  <a\n                    href=\"#\"\n                    className=\"flex w-full items-center justify-center gap-3 rounded-md bg-white px-3 py-1.5 text-black bordered border-2 border-black\"\n                  >\n                    <FaLinkedin className=\"h-5 w-5\" />\n                    <span className=\"text-sm font-semibold leading-6\">LinkedIn</span>\n                  </a>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n"],
  "mappings": "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",
  "names": ["import_react", "_a", "_b", "_c", "_d"]
}
